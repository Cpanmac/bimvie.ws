<div class="selectserver container">
    <div class="span7">
    	<div class="header"></div>
		<form class="form-horizontal">
		   	<legend>Select server</legend>
			<div class="serverAddressDiv control-group">
				<label class="control-label" for="inputServer">Server</label>
				<div class="controls">
					<div class="btn-group input-append">
						<div class="input-prepend input-append">
		 					<span class="add-on">http://</span>
							<input type="text" id="inputServer" class="address" placeholder="BIMserver">
						</div>
					</div>
				</div>
			</div>
			<div class="control-group">
				<div class="controls">
					<button type="button" class="btn selectServerButton btn-primary">Select server</button>
				</div>
			</div>
		</form>
	</div>
</div>
<script>
function SelectServer(address) {
	var othis = this;

	$(".header").load(Global.baseDir + "header.html");
	
	pushHistory({page: "SelectServer"}, "Select BIMsie Server");
	
	$(".selectServerButton").click(function(){
		var address = $("#inputServer").val();
		loadBimServerApi("http://" + address, Global.notifier, function(serverInfo){
			if (serverInfo.serverState == "NOT_SETUP") {
				$(".indexcontainer").load(Global.baseDir + "setup.html", function(){
					new Setup(address);
				});
			} else if (serverInfo.serverState == "UNDEFINED") {
			} else if (serverInfo.serverState == "MIGRATION_REQUIRED") {
			} else if (serverInfo.serverState == "MIGRATION_IMPOSSIBLE") {
			} else if (serverInfo.serverState == "FATAL_ERROR") {
			} else if (serverInfo.serverState == "RUNNING") {
				$(".indexcontainer").load(Global.baseDir + "login.html", function(){
					othis.current = new Login(address);
				});
			}
		}, function(){
			
		});
	});
	
	$(".address").focus();
}
</script>